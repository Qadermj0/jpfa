name: Deploy to GitHub Pages

# Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù€ workflow ÙŠØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ÙƒÙ„ push Ø¹Ù„Ù‰ ÙØ±Ø¹ main
on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

# Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ù€ action Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ù„ÙØ§Øª
permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø³Ø­Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4

      # Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ¬Ù‡ÙŠØ² Ø¨ÙŠØ¦Ø© Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø³Ø®Ø© Node.js Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨ Ù…Ø´Ø±ÙˆØ¹Ùƒ

      # Ø§Ù„Ø®Ø·ÙˆØ© 3: ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
      - name: Install Dependencies ğŸ“¦
        run: npm install

      # Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ù‡Ù†Ø§ Ø§Ù„Ø³Ø±)
      # ÙŠØªÙ… Ø­Ù‚Ù† Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø³Ø±ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡
      - name: Build ğŸ—ï¸
        run: npm run build
        env:
          VITE_API_BASE_URL: ${{ secrets.VITE_API_BASE_URL }}

      # Ø§Ù„Ø®Ø·ÙˆØ© 5: ØªØ¬Ù‡ÙŠØ² Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø´Ø±
      - name: Setup Pages
        uses: actions/configure-pages@v5

      # Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù€ GitHub Pages
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: './dist' # ØªØ£ÙƒØ¯ Ø£Ù† Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ (Ù‚Ø¯ ÙŠÙƒÙˆÙ† build)

      # Ø§Ù„Ø®Ø·ÙˆØ© 7: Ù†Ø´Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
      - name: Deploy to GitHub Pages ğŸš€
        id: deployment
        uses: actions/deploy-pages@v4